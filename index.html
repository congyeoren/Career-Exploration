<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pastel Personality Sorter</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Light pastel background gradient */
      body {
        background: linear-gradient(
          to bottom right,
          rgba(255, 240, 245, 1),
          rgba(240, 255, 249, 1)
        );
      }
      /* Subtle box shadow and hover lift for trait cards */
      .trait-box {
        transition: transform 0.1s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }
      .trait-box:hover {
        transform: translateY(-2px);
      }
      /* Smooth removal animation */
      .trait-item {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translateX(0);
        opacity: 1;
      }
      .trait-item.removing {
        transform: translateX(-100%);
        opacity: 0;
      }
      /* Smooth addition animation */
      .trait-item.adding {
        transform: translateY(-20px);
        opacity: 0;
      }
      .trait-item.added {
        transform: translateY(0);
        opacity: 1;
      }
    </style>
  </head>

  <body class="min-h-screen">
    <!-- Main container -->
    <div id="app" class="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8"></div>

    <script>
      /***********************************************
       * Pastel Personality Sorter in pure HTML/JS
       * Tailwind for styling, fallback copy logic.
       ***********************************************/

      // 50 personality traits (with short descriptions)
      const TRAITS = [
        { label: "Adventurous", description: "Eager to try new experiences and take risks." },
        { label: "Ambitious", description: "Driven to achieve goals and succeed." },
        { label: "Analytical", description: "Enjoys breaking down complex problems logically." },
        { label: "Artistic", description: "Creative and drawn to aesthetic expression." },
        { label: "Assertive", description: "Confident in expressing opinions and needs." },
        { label: "Calm", description: "Maintains composure under pressure." },
        { label: "Caring", description: "Shows genuine concern for others' wellbeing." },
        { label: "Cautious", description: "Thinks carefully before making decisions." },
        { label: "Charismatic", description: "Naturally attracts and influences others." },
        { label: "Collaborative", description: "Works well with others towards shared goals." },
        { label: "Competitive", description: "Thrives on challenges and winning." },
        { label: "Confident", description: "Believes in own abilities and judgment." },
        { label: "Creative", description: "Generates original ideas and artistic solutions." },
        { label: "Curious", description: "Eager to learn and explore new ideas." },
        { label: "Decisive", description: "Makes choices quickly and confidently." },
        { label: "Detail-oriented", description: "Pays close attention to specifics and accuracy." },
        { label: "Diplomatic", description: "Handles conflicts and negotiations tactfully." },
        { label: "Disciplined", description: "Maintains self-control and follows routines." },
        { label: "Empathetic", description: "Understands and shares others' emotions." },
        { label: "Energetic", description: "High levels of enthusiasm and vitality." },
        { label: "Flexible", description: "Adapts easily to changing circumstances." },
        { label: "Focused", description: "Concentrates deeply on tasks and goals." },
        { label: "Friendly", description: "Warm and approachable in social interactions." },
        { label: "Honest", description: "Values truth and transparency in all dealings." },
        { label: "Humorous", description: "Uses wit and comedy to connect with others." },
        { label: "Independent", description: "Prefers to work and think autonomously." },
        { label: "Innovative", description: "Generates original ideas and solutions." },
        { label: "Intuitive", description: "Relies on instinct and gut feelings." },
        { label: "Leadership-oriented", description: "Naturally takes charge and guides others." },
        { label: "Logical", description: "Makes decisions based on reason and evidence." },
        { label: "Loyal", description: "Committed and faithful to people and causes." },
        { label: "Methodical", description: "Approaches tasks in an organised, systematic way." },
        { label: "Open-minded", description: "Receptive to new ideas and perspectives." },
        { label: "Optimistic", description: "Maintains a positive outlook on situations." },
        { label: "Organised", description: "Keeps things structured and well-arranged." },
        { label: "Outgoing", description: "Enjoys social interaction and meeting new people." },
        { label: "Patient", description: "Remains calm when things take time." },
        { label: "Perfectionist", description: "Strives for flawless results in work." },
        { label: "Persistent", description: "Continues working despite obstacles." },
        { label: "Practical", description: "Focuses on realistic, workable solutions." },
        { label: "Proactive", description: "Takes initiative and anticipates needs." },
        { label: "Reliable", description: "Consistently follows through on commitments." },
        { label: "Reserved", description: "Thoughtful and selective in social interactions." },
        { label: "Resourceful", description: "Finds creative ways to overcome challenges." },
        { label: "Responsible", description: "Takes ownership of duties and obligations." },
        { label: "Spontaneous", description: "Acts on impulse and embraces unpredictability." },
        { label: "Strategic", description: "Plans ahead and considers long-term consequences." },
        { label: "Supportive", description: "Encourages and helps others succeed." },
        { label: "Thoughtful", description: "Considers others' feelings and perspectives." },
        { label: "Visionary", description: "Sees possibilities and future potential." }
      ];

      // Sorting buckets
      let keep = [];
      let discard = [];
      let remaining = [...TRAITS];

      function render() {
        const app = document.getElementById("app");
        const currentTrait = remaining[0];
        const sortedCount = keep.length + discard.length;
        const total = TRAITS.length;
        const progressPercent = Math.round((sortedCount / total) * 100);

        app.innerHTML = `
          <h1 class="text-4xl font-extrabold mb-4 text-center text-purple-600">Sort Your Personality Traits</h1>
          <p class="mb-6 text-center text-md text-purple-700 max-w-xl mx-auto">
            Decide for each trait: Keep or Discard.<br/>
            You can edit your choices anytime.
          </p>

          <!-- Progress bar -->
          <div class="mb-8 text-center">
            <div class="w-full bg-purple-100 rounded-full h-4">
              <div class="bg-purple-300 h-4 rounded-full transition-all duration-300" style="width: ${progressPercent}%"></div>
            </div>
            <p class="text-sm text-purple-700 mt-1 font-medium">
              <span id="progress-text">${sortedCount} of ${total} sorted (${progressPercent}%)</span>
            </p>
          </div>

          <!-- 3 columns layout -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Discard Column -->
            <div>
              <h2 class="text-xl font-bold mb-2 text-pink-600 text-center">Discard</h2>
              <ul id="discard-list" class="space-y-2 max-h-[360px] overflow-y-auto pr-2">
                ${renderTraitList(discard, 'discard')}
              </ul>
            </div>

            <!-- Middle Column: Current Trait -->
            <div class="text-center">
              <h2 class="text-xl font-bold mb-2 text-gray-700">Current Trait</h2>
              <div id="current-trait">
                ${renderCurrentTrait(currentTrait)}
              </div>
              <!-- Reset Button -->
              <button onclick="resetAll()"
                class="block mt-5 px-6 py-2 bg-gray-100 text-gray-700 font-medium rounded hover:bg-gray-200 mx-auto"
              >
                Reset All
              </button>
            </div>

            <!-- Keep Column -->
            <div>
              <h2 class="text-xl font-bold mb-2 text-green-600 text-center">Keep <span id="keep-count" class="text-sm text-green-700">(${keep.length})</span></h2>
              <ul id="keep-list" class="space-y-2 max-h-[360px] overflow-y-auto pr-2">
                ${renderTraitList(keep, 'keep')}
              </ul>
            </div>
          </div>

          <!-- Prompt Box with Copy Button -->
          <div class="mt-10 p-4 border border-gray-200 rounded bg-white trait-box w-fit mx-auto text-center">
            <h3 class="text-lg font-bold mb-2 text-purple-700">Your Prompt</h3>
            <p class="text-sm text-gray-600 whitespace-pre-wrap" id="promptText">${PROMPT_TEXT}</p>
            <button
              onclick="copyPrompt()"
              class="mt-3 px-4 py-2 bg-purple-200 text-purple-800 text-sm font-medium rounded hover:bg-purple-300"
            >
              Copy This Prompt
            </button>
          </div>
        `;
      }

      function renderTraitList(traits, type) {
        const colorClass = type === 'keep' ? 'green' : 'pink';
        return traits
          .map((label) => {
            const t = TRAITS.find((trait) => trait.label === label);
            return `
              <li id="trait-${type}-${label.replace(/\s+/g, '-').replace(/\//g, '-')}" class="trait-item p-3 border border-${colorClass}-200 rounded bg-${colorClass}-50 trait-box">
                <p class="font-semibold text-${colorClass}-700 flex justify-between items-center">
                  ${t.label}
                  <button class="text-xs text-${colorClass}-600 underline ml-2"
                    onclick="revertTraitSmooth('${label}', '${type}')"
                  >
                    Remove
                  </button>
                </p>
                <p class="text-xs text-${colorClass}-700 mt-1">${t.description}</p>
              </li>
            `;
          })
          .join("");
      }

      function renderCurrentTrait(currentTrait) {
        if (!currentTrait) {
          return `<p class='text-sm text-gray-700 italic'>All traits sorted! You can still make changes below.</p>`;
        }
        
        return `
          <div class="p-6 border border-gray-200 rounded bg-white trait-box inline-block">
            <p class="font-semibold text-gray-800 text-lg mb-1">${currentTrait.label}</p>
            <p class="text-sm text-gray-600 mb-4">${currentTrait.description}</p>
            <div class="space-x-4">
              <button onclick="keepTrait()"
                class="px-4 py-2 bg-green-200 text-green-800 font-medium rounded hover:bg-green-300"
              >
                Keep
              </button>
              <button onclick="discardTrait()"
                class="px-4 py-2 bg-pink-200 text-pink-800 font-medium rounded hover:bg-pink-300"
              >
                Discard
              </button>
            </div>
          </div>
        `;
      }

      function updateProgress() {
        const sortedCount = keep.length + discard.length;
        const total = TRAITS.length;
        const progressPercent = Math.round((sortedCount / total) * 100);
        
        const progressBar = document.querySelector('.bg-purple-300');
        const progressText = document.getElementById('progress-text');
        const keepCount = document.getElementById('keep-count');
        
        if (progressBar) {
          progressBar.style.width = `${progressPercent}%`;
        }
        if (progressText) {
          progressText.textContent = `${sortedCount} of ${total} sorted (${progressPercent}%)`;
        }
        if (keepCount) {
          keepCount.textContent = `(${keep.length})`;
        }
      }

      /**************************************
       * Sorting Logic + Smooth Revert + Reset
       **************************************/
      function keepTrait() {
        if (!remaining[0]) return;
        const trait = remaining.shift();
        keep.push(trait.label);
        
        // Add to keep list smoothly
        const keepList = document.getElementById('keep-list');
        const newItem = document.createElement('li');
        newItem.id = `trait-keep-${trait.label.replace(/\s+/g, '-').replace(/\//g, '-')}`;
        newItem.className = 'trait-item adding p-3 border border-green-200 rounded bg-green-50 trait-box';
        newItem.innerHTML = `
          <p class="font-semibold text-green-700 flex justify-between items-center">
            ${trait.label}
            <button class="text-xs text-green-600 underline ml-2"
              onclick="revertTraitSmooth('${trait.label}', 'keep')"
            >
              Remove
            </button>
          </p>
          <p class="text-xs text-green-700 mt-1">${trait.description}</p>
        `;
        
        keepList.appendChild(newItem);
        
        // Trigger animation
        requestAnimationFrame(() => {
          newItem.classList.remove('adding');
          newItem.classList.add('added');
        });
        
        updateCurrentTrait();
        updateProgress();
      }

      function discardTrait() {
        if (!remaining[0]) return;
        const trait = remaining.shift();
        discard.push(trait.label);
        
        // Add to discard list smoothly
        const discardList = document.getElementById('discard-list');
        const newItem = document.createElement('li');
        newItem.id = `trait-discard-${trait.label.replace(/\s+/g, '-').replace(/\//g, '-')}`;
        newItem.className = 'trait-item adding p-3 border border-pink-200 rounded bg-pink-50 trait-box';
        newItem.innerHTML = `
          <p class="font-semibold text-pink-700 flex justify-between items-center">
            ${trait.label}
            <button class="text-xs text-pink-600 underline ml-2"
              onclick="revertTraitSmooth('${trait.label}', 'discard')"
            >
              Remove
            </button>
          </p>
          <p class="text-xs text-pink-700 mt-1">${trait.description}</p>
        `;
        
        discardList.appendChild(newItem);
        
        // Trigger animation
        requestAnimationFrame(() => {
          newItem.classList.remove('adding');
          newItem.classList.add('added');
        });
        
        updateCurrentTrait();
        updateProgress();
      }

      function revertTraitSmooth(label, from) {
        const itemId = `trait-${from}-${label.replace(/\s+/g, '-').replace(/\//g, '-')}`;
        const item = document.getElementById(itemId);
        
        if (!item) return;
        
        // Start removal animation
        item.classList.add('removing');
        
        // Remove from data and DOM after animation completes
        setTimeout(() => {
          if (from === "keep") {
            keep = keep.filter((t) => t !== label);
          } else if (from === "discard") {
            discard = discard.filter((t) => t !== label);
          }
          
          const trait = TRAITS.find((t) => t.label === label);
          remaining.push(trait);
          
          item.remove();
          updateCurrentTrait();
          updateProgress();
        }, 400); // Match the CSS transition duration
      }

      function updateCurrentTrait() {
        const currentTraitDiv = document.getElementById('current-trait');
        const currentTrait = remaining[0];
        if (currentTraitDiv) {
          currentTraitDiv.innerHTML = renderCurrentTrait(currentTrait);
        }
      }

      function resetAll() {
        keep = [];
        discard = [];
        remaining = [...TRAITS];
        render();
      }

      /**************************************
       * Copy to Clipboard with Fallback
       **************************************/
      const PROMPT_TEXT = `I am a high school student exploring career options. My top 3 personality traits are: [Trait 1], [Trait 2], and [Trait 3].

Please suggest 8-10 careers that strongly align with these personality traits. For each career, include:

- A brief description (1-2 sentences).
- Why it fits my personality combination.
- Examples of industries or workplaces where this career exists.

Then, recommend 1-2 additional traits or skills I could develop to strengthen my fit for these careers.

Format your response in a clear list with headings.`;

      function copyPrompt() {
        // If more than 3 in keep => error message
        if (keep.length > 3) {
          alert("Ensure only top 3 traits are listed.");
          return;
        }

        if (keep.length === 0) {
          const nonePrompt = `I am a high school student exploring career options. I have not chosen any personality traits yet.

Please suggest how I might begin identifying my personality traits and potential careers based on them.`;
          copyTextToClipboard(nonePrompt);
          return;
        }

        let intro = "I have not chosen any traits.";
        if (keep.length === 1) {
          intro = `My top personality trait is: ${keep[0]}.`;
        } else if (keep.length === 2) {
          intro = `My top 2 personality traits are: ${keep[0]}, ${keep[1]}.`;
        } else if (keep.length === 3) {
          intro = `My top 3 personality traits are: ${keep[0]}, ${keep[1]}, ${keep[2]}.`;
        }

        const finalPrompt = `I am a high school student exploring career options. ${intro}

Please suggest 8-10 careers that strongly align with these personality traits. For each career, include:

- A brief description (1-2 sentences).
- Why it fits my personality combination.
- Examples of industries or workplaces where this career exists.

Then, recommend 1-2 additional traits or skills I could develop to strengthen my fit for these careers.

Format your response in a clear list with headings.`;

        copyTextToClipboard(finalPrompt);
      }

      async function copyTextToClipboard(text) {
        if (navigator.clipboard && window.isSecureContext) {
          navigator.clipboard.writeText(text)
            .then(() => {
              alert("Prompt copied to clipboard!");
            })
            .catch((err) => {
              console.error("Failed using navigator.clipboard:", err);
              fallbackCopy(text);
            });
        } else {
          fallbackCopy(text);
        }
      }

      function fallbackCopy(text) {
        console.warn("Using fallback copy method.");
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed";
        textArea.style.top = "-9999px";
        textArea.style.left = "-9999px";

        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
          const successful = document.execCommand("copy");
          if (successful) {
            alert("Prompt copied to clipboard!");
          } else {
            alert("Failed to copy prompt via fallback.");
          }
        } catch (fallbackErr) {
          console.error("Fallback copy failed:", fallbackErr);
          alert("Failed to copy prompt.");
        } finally {
          document.body.removeChild(textArea);
        }
      }

      // Initial render
      render();
    </script>
  </body>
</html>
