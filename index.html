<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pastel Personality Sorter</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              display: ["Plus Jakarta Sans", "sans-serif"],
            },
            colors: {
              brand: {
                50: "#f5f3ff",
                100: "#ede9fe",
                200: "#ddd6fe",
                300: "#c4b5fd",
                400: "#a78bfa",
                500: "#8b5cf6",
                600: "#7c3aed",
                700: "#6d28d9",
                800: "#5b21b6",
                900: "#4c1d95",
              },
            },
            boxShadow: {
              glow: "0 24px 60px -20px rgba(124, 58, 237, 0.5)",
            },
          },
        },
      };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        color-scheme: light;
        --page-gradient: radial-gradient(
            120% 120% at 12% 0%,
            rgba(248, 237, 255, 0.8) 0%,
            rgba(219, 255, 247, 0.6) 32%,
            #ffffff 78%
          ),
          radial-gradient(
            120% 120% at 88% 10%,
            rgba(236, 233, 255, 0.7) 0%,
            rgba(255, 242, 248, 0.6) 35%,
            #ffffff 70%
          );
      }

      :root.dark {
        color-scheme: dark;
        --page-gradient: radial-gradient(
            120% 120% at 10% 0%,
            rgba(99, 102, 241, 0.24) 0%,
            rgba(15, 23, 42, 0.9) 45%,
            #020617 90%
          ),
          radial-gradient(
            120% 120% at 90% 14%,
            rgba(236, 72, 153, 0.18) 0%,
            rgba(15, 23, 42, 0.9) 55%,
            #020617 95%
          );
      }

      body {
        background: var(--page-gradient);
        font-family: "Plus Jakarta Sans", system-ui, -apple-system, "Segoe UI", sans-serif;
        transition: background 0.6s ease, color 0.4s ease;
      }

      .glass-card {
        background: rgba(255, 255, 255, 0.78);
        border: 1px solid rgba(148, 163, 184, 0.25);
        box-shadow: 0 25px 60px -35px rgba(79, 70, 229, 0.55);
        backdrop-filter: blur(24px);
      }

      .glass-subtle {
        background: rgba(255, 255, 255, 0.68);
        border: 1px solid rgba(148, 163, 184, 0.2);
        backdrop-filter: blur(18px);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4);
      }

      html.dark .glass-card {
        background: rgba(15, 23, 42, 0.68);
        border-color: rgba(148, 163, 184, 0.15);
        box-shadow: 0 25px 60px -35px rgba(15, 23, 42, 0.7);
      }

      html.dark .glass-subtle {
        background: rgba(15, 23, 42, 0.72);
        border-color: rgba(71, 85, 105, 0.35);
        box-shadow: inset 0 1px 0 rgba(148, 163, 184, 0.12);
      }

      .theme-icon {
        position: absolute;
        inset: 0;
        margin: auto;
        height: 1.25rem;
        width: 1.25rem;
        transform: scale(0.7) translateY(4px);
        opacity: 0;
        transition: transform 0.45s ease, opacity 0.45s ease;
      }

      .theme-icon.is-active {
        transform: scale(1) translateY(0);
        opacity: 1;
      }

      .trait-item {
        transition: transform 0.45s ease, opacity 0.45s ease, box-shadow 0.45s ease;
      }

      .trait-item:hover {
        transform: translateY(-6px);
      }

      .trait-item.removing {
        transform: translateX(-32px);
        opacity: 0;
      }

      .trait-item.adding {
        transform: translateY(18px);
        opacity: 0;
      }

      .trait-item.added {
        transform: translateY(0);
        opacity: 1;
      }

      .custom-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: rgba(148, 163, 184, 0.45) transparent;
      }

      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }

      .custom-scrollbar::-webkit-scrollbar-thumb {
        border-radius: 9999px;
        background: linear-gradient(180deg, rgba(109, 40, 217, 0.35), rgba(236, 72, 153, 0.45));
      }

      html.dark .custom-scrollbar::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, rgba(129, 140, 248, 0.35), rgba(244, 114, 182, 0.5));
      }

      @keyframes floaty {
        0%,
        100% {
          transform: translate3d(0, 0, 0) scale(1);
        }
        50% {
          transform: translate3d(0, -18px, 0) scale(1.03);
        }
      }

      .animate-soft-float {
        animation: floaty 18s ease-in-out infinite;
      }

      .animate-soft-float-slower {
        animation: floaty 28s ease-in-out infinite;
      }

      .animation-delay-7000 {
        animation-delay: 7s;
      }

      pre {
        font-family: "DM Mono", "JetBrains Mono", "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      }
    </style>
  </head>
  <body class="font-display antialiased text-slate-800 transition-colors duration-500 dark:text-slate-100">
    <div class="relative min-h-screen overflow-hidden pb-16">
      <div aria-hidden="true" class="pointer-events-none absolute inset-0 -z-10">
        <div
          class="absolute -top-32 left-1/2 h-[380px] w-[380px] -translate-x-1/2 rounded-full bg-gradient-to-br from-brand-300/40 via-rose-200/35 to-sky-200/45 blur-3xl animate-soft-float"
        ></div>
        <div
          class="absolute -bottom-44 -left-24 h-[360px] w-[360px] rounded-full bg-gradient-to-br from-emerald-200/45 via-teal-200/35 to-amber-200/40 blur-3xl animate-soft-float-slower animation-delay-7000 dark:from-emerald-500/25 dark:via-teal-500/25 dark:to-amber-400/25"
        ></div>
        <div
          class="absolute top-1/3 right-1/4 h-[220px] w-[340px] rotate-12 rounded-[120px] bg-gradient-to-br from-white/60 via-white/20 to-transparent blur-2xl animate-soft-float-slower animation-delay-7000 dark:from-white/10 dark:via-white/5 dark:to-transparent"
        ></div>
      </div>
      <div class="relative z-10">
        <header class="mx-auto w-full max-w-6xl px-4 pt-10 sm:px-6 lg:px-8">
          <nav class="flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between">
            <a
              href="./"
              class="text-xs font-semibold uppercase tracking-[0.45em] text-slate-500 transition hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"
            >
              Career Canvas
            </a>
            <div class="flex items-center gap-3">
              <a
                href="skills.html"
                class="inline-flex items-center gap-2 rounded-full border border-white/60 bg-white/70 px-4 py-2 text-sm font-semibold text-slate-600 shadow-md shadow-brand-500/10 transition hover:-translate-y-0.5 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-brand-300/50 dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-slate-200"
              >
                <span class="hidden sm:inline">Visit</span>
                Skill sorter
                <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
              </a>
              <button
                id="theme-toggle"
                type="button"
                class="relative inline-flex items-center gap-2 rounded-full border border-white/60 bg-white/70 px-4 py-2 text-sm font-semibold uppercase tracking-[0.3em] text-slate-600 shadow-md shadow-brand-500/10 transition hover:-translate-y-0.5 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-brand-300/60 dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-slate-100"
                aria-label="Switch to dark mode"
                aria-pressed="false"
              >
                <span class="sr-only">Toggle theme</span>
                <span class="relative flex h-5 w-5 items-center justify-center">
                  <svg
                    id="icon-sun"
                    class="theme-icon text-amber-400 drop-shadow"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.8"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.75V3m0 18v-1.75M7.757 7.757 6.343 6.343m11.314 11.314-1.414-1.414M4.75 12H3m18 0h-1.75M7.757 16.243 6.343 17.657m11.314-11.314-1.414 1.414M16.5 12a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z" />
                  </svg>
                  <svg
                    id="icon-moon"
                    class="theme-icon text-indigo-200 drop-shadow"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.8"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z" />
                  </svg>
                </span>
                <span id="theme-toggle-label">Dark mode</span>
              </button>
            </div>
          </nav>
          <div class="mt-12 text-center sm:text-left">
            <span
              class="inline-flex items-center gap-2 rounded-full bg-white/70 px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-brand-600 shadow-md shadow-brand-500/20 dark:bg-white/10 dark:text-brand-300"
            >
              Personality journey
            </span>
            <h1 class="mt-6 text-4xl font-extrabold tracking-tight text-slate-900 sm:text-5xl dark:text-white">
              Design your standout personality profile
            </h1>
            <p class="mt-4 max-w-2xl text-lg leading-relaxed text-slate-600 dark:text-slate-300">
              Glide through every trait inside a calming, responsive workspace. Tap <strong>Keep</strong> for the qualities that feel most like you, or <strong>Discard</strong> to set them aside. Swap between light and dark modes anytime for comfort.
            </p>
          </div>
        </header>
        <main class="mx-auto w-full max-w-6xl px-4 sm:px-6 lg:px-8">
          <div id="app" class="mt-12 space-y-12"></div>
        </main>
      </div>
    </div>
    <script>
      const TRAITS = [
        { label: "Adventurous", description: "Eager to try new experiences and take risks." },
        { label: "Ambitious", description: "Driven to achieve goals and succeed." },
        { label: "Analytical", description: "Enjoys breaking down complex problems logically." },
        { label: "Artistic", description: "Creative and drawn to aesthetic expression." },
        { label: "Assertive", description: "Confident in expressing opinions and needs." },
        { label: "Calm", description: "Maintains composure under pressure." },
        { label: "Caring", description: "Shows genuine concern for others' wellbeing." },
        { label: "Cautious", description: "Thinks carefully before making decisions." },
        { label: "Charismatic", description: "Naturally attracts and influences others." },
        { label: "Collaborative", description: "Works well with others toward shared goals." },
        { label: "Compassionate", description: "Feels and shows sympathy for others." },
        { label: "Confident", description: "Believes in personal abilities and judgment." },
        { label: "Creative", description: "Generates original ideas and artistic solutions." },
        { label: "Curious", description: "Eager to learn and explore new ideas." },
        { label: "Decisive", description: "Makes choices quickly and confidently." },
        { label: "Dependable", description: "Can be relied on to follow through." },
        { label: "Determined", description: "Pushes forward even when challenges arise." },
        { label: "Empathetic", description: "Understands and shares other people's feelings." },
        { label: "Energetic", description: "Brings enthusiasm and vitality to situations." },
        { label: "Flexible", description: "Adapts easily to changing circumstances." },
        { label: "Focused", description: "Concentrates deeply on tasks and goals." },
        { label: "Friendly", description: "Warm and approachable in social settings." },
        { label: "Honest", description: "Values truth and transparency in all dealings." },
        { label: "Humorous", description: "Uses wit and levity to connect with others." },
        { label: "Independent", description: "Prefers to work and think autonomously." },
        { label: "Innovative", description: "Generates original ideas and solutions." },
        { label: "Intuitive", description: "Relies on instinct and gut feelings." },
        { label: "Leadership-oriented", description: "Naturally takes charge and guides others." },
        { label: "Logical", description: "Makes decisions based on reason and evidence." },
        { label: "Loyal", description: "Committed and faithful to people and causes." },
        { label: "Motivated", description: "Stays driven to achieve meaningful progress." },
        { label: "Open-minded", description: "Receptive to new ideas and perspectives." },
        { label: "Optimistic", description: "Maintains a positive outlook on situations." },
        { label: "Organised", description: "Keeps things structured and well arranged." },
        { label: "Outgoing", description: "Enjoys social interaction and meeting new people." },
        { label: "Patient", description: "Remains calm when things take time." },
        { label: "Perceptive", description: "Notices subtle details and underlying meanings." },
        { label: "Persistent", description: "Continues working despite obstacles." },
        { label: "Practical", description: "Focuses on realistic, workable solutions." },
        { label: "Resilient", description: "Recovers quickly from setbacks." },
        { label: "Resourceful", description: "Finds clever ways to solve problems." },
        { label: "Supportive", description: "Encourages and uplifts the people around them." },
        { label: "Visionary", description: "Imagines bold possibilities for the future." }
      ];

      const PROMPT_TEXT = `I am a high school student exploring career options. My top 3 personality traits are: [Trait 1], [Trait 2], and [Trait 3].

Please suggest 8-10 careers that strongly align with these traits. For each career, include:

- A brief description (1-2 sentences).
- Why it fits my personality combination.
- Examples of industries or workplaces where this career exists.

Then, recommend 1-2 additional traits or skills I could develop to strengthen my fit for these careers.

Format your response in a clear list with headings.`;

      const TRAIT_STYLE_MAP = {
        keep: {
          container: "group relative overflow-hidden rounded-3xl border border-emerald-200/75 bg-white/75 p-5 shadow-[0_22px_55px_-32px_rgba(16,185,129,0.75)] backdrop-blur-xl transition-all duration-500 hover:-translate-y-1 hover:shadow-[0_32px_55px_-30px_rgba(16,185,129,0.6)] dark:border-emerald-500/35 dark:bg-emerald-500/10",
          accent: "from-emerald-400 via-teal-400 to-emerald-500",
          badge: "bg-emerald-500/15 text-emerald-700 dark:bg-emerald-500/25 dark:text-emerald-200",
          label: "text-emerald-900 dark:text-emerald-50",
          description: "text-emerald-700 dark:text-emerald-200",
          button: "text-emerald-700/90 hover:text-emerald-600 dark:text-emerald-200 dark:hover:text-emerald-100",
        },
        discard: {
          container: "group relative overflow-hidden rounded-3xl border border-rose-200/75 bg-white/75 p-5 shadow-[0_22px_55px_-32px_rgba(244,114,182,0.65)] backdrop-blur-xl transition-all duration-500 hover:-translate-y-1 hover:shadow-[0_32px_55px_-30px_rgba(244,114,182,0.55)] dark:border-rose-500/35 dark:bg-rose-500/10",
          accent: "from-rose-400 via-pink-400 to-fuchsia-500",
          badge: "bg-rose-500/15 text-rose-700 dark:bg-rose-500/25 dark:text-rose-200",
          label: "text-rose-900 dark:text-rose-50",
          description: "text-rose-700 dark:text-rose-200",
          button: "text-rose-700/90 hover:text-rose-500 dark:text-rose-200 dark:hover:text-rose-100",
        },
      };

      const THEME_STORAGE_KEY = "career-exploration-theme";
      const rootElement = document.documentElement;
      let keep = [];
      let discard = [];
      let remaining = [...TRAITS];

      function slugify(label) {
        return label.toLowerCase().replace(/[^a-z0-9]+/g, "-");
      }

      function getTraitItemId(type, label) {
        return `trait-${type}-${slugify(label)}`;
      }

      function traitItemMarkup(trait, type) {
        const styles = TRAIT_STYLE_MAP[type];
        return `
          <li id="${getTraitItemId(type, trait.label)}" class="trait-item ${styles.container}">
            <span class="pointer-events-none absolute inset-x-5 top-0 h-1 rounded-full bg-gradient-to-r ${styles.accent} opacity-70"></span>
            <span class="pointer-events-none absolute -right-16 top-6 h-28 w-28 rounded-full bg-white/50 blur-3xl transition-opacity duration-500 group-hover:opacity-90 dark:bg-white/10"></span>
            <div class="relative z-10 space-y-3">
              <div class="flex items-start justify-between gap-4">
                <div class="space-y-2">
                  <span class="inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] ${styles.badge}">${type === "keep" ? "Top pick" : "Revisit later"}</span>
                  <p class="text-base font-semibold ${styles.label}">${trait.label}</p>
                </div>
                <button
                  type="button"
                  class="rounded-full border border-transparent px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] transition ${styles.button}"
                  data-action="remove"
                  data-origin="${type}"
                  data-label="${trait.label}"
                >
                  Remove
                </button>
              </div>
              <p class="text-sm leading-relaxed ${styles.description}">${trait.description}</p>
            </div>
          </li>
        `;
      }

      function renderTraitList(labels, type) {
        return labels
          .map((label) => {
            const trait = TRAITS.find((item) => item.label === label);
            return trait ? traitItemMarkup(trait, type) : "";
          })
          .join("");
      }

      function render() {
        const app = document.getElementById("app");
        if (!app) return;
        const currentTrait = remaining[0];
        const sortedCount = keep.length + discard.length;
        const total = TRAITS.length;
        const progressPercent = total ? Math.round((sortedCount / total) * 100) : 0;
        app.innerHTML = `
          <section class="glass-card rounded-[32px] px-6 py-7 shadow-xl shadow-brand-500/10 md:px-10 md:py-10">
            <div class="flex flex-col gap-8 md:flex-row md:items-center md:justify-between">
              <div class="space-y-4 text-center md:text-left">
                <p class="text-xs font-semibold uppercase tracking-[0.35em] text-brand-500/80 dark:text-brand-200/70">Progress</p>
                <div class="flex flex-col items-center gap-2 md:flex-row md:items-end md:gap-4">
                  <span class="text-4xl font-extrabold text-slate-900 dark:text-white" id="sorted-count">${sortedCount}</span>
                  <span class="text-sm font-medium text-slate-600 dark:text-slate-300">of ${total} traits sorted</span>
                </div>
                <p id="progress-summary" class="text-sm text-slate-500 dark:text-slate-400">${sortedCount} of ${total} traits sorted</p>
              </div>
              <div class="flex flex-col gap-3 sm:flex-row sm:items-center">
                <div class="glass-subtle rounded-2xl px-5 py-3 text-center text-xs font-semibold uppercase tracking-[0.3em] text-slate-500 dark:text-slate-300">
                  <span class="mb-1 inline-flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-brand-400 via-fuchsia-400 to-amber-400 text-lg font-bold text-white shadow-lg shadow-brand-500/40" id="progress-value">${progressPercent}%</span>
                  Complete
                </div>
                <button
                  onclick="resetAll()"
                  class="inline-flex items-center justify-center gap-2 rounded-2xl border border-transparent bg-gradient-to-r from-brand-500 via-fuchsia-500 to-amber-400 px-6 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-white shadow-lg shadow-brand-500/30 transition hover:-translate-y-0.5 hover:shadow-2xl focus:outline-none focus:ring-2 focus:ring-brand-300/60"
                >
                  <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 7.5v-3m0 0h3m-3 0 4 4M19.5 16.5v3m0 0h-3m3 0-4-4M8.25 5.75a6.5 6.5 0 0 1 11.21 4.06m.04 4.38a6.5 6.5 0 0 1-11.2 4.06" />
                  </svg>
                  Reset journey
                </button>
              </div>
            <div class="mt-8 h-3 w-full overflow-hidden rounded-full bg-slate-200/60 dark:bg-slate-800/60">
              <div
                id="progress-indicator"
                class="h-full rounded-full bg-gradient-to-r from-brand-500 via-fuchsia-500 to-amber-400 transition-all duration-700 ease-out"
                style="width: ${progressPercent}%"
              ></div>
            </div>
            <div class="mt-8 grid grid-cols-2 gap-4 text-center text-sm font-medium sm:grid-cols-4">
              <div class="glass-subtle rounded-2xl px-4 py-4">
                <p class="text-xs uppercase tracking-[0.3em] text-slate-500 dark:text-slate-400">Kept</p>
                <p id="keep-total" class="mt-1 text-2xl font-bold text-slate-900 dark:text-white">${keep.length}</p>
              </div>
              <div class="glass-subtle rounded-2xl px-4 py-4">
                <p class="text-xs uppercase tracking-[0.3em] text-slate-500 dark:text-slate-400">Discarded</p>
                <p id="discard-total" class="mt-1 text-2xl font-bold text-slate-900 dark:text-white">${discard.length}</p>
              </div>
              <div class="glass-subtle rounded-2xl px-4 py-4">
                <p class="text-xs uppercase tracking-[0.3em] text-slate-500 dark:text-slate-400">Remaining</p>
                <p id="remaining-total" class="mt-1 text-2xl font-bold text-slate-900 dark:text-white">${remaining.length}</p>
              </div>
              <div class="glass-subtle rounded-2xl px-4 py-4">
                <p class="text-xs uppercase tracking-[0.3em] text-slate-500 dark:text-slate-400">Total</p>
                <p class="mt-1 text-2xl font-bold text-slate-900 dark:text-white">${total}</p>
              </div>
            </div>
          </section>
          <section class="grid grid-cols-1 gap-8 lg:grid-cols-[1fr_minmax(0,1.15fr)_1fr]">
            <div class="glass-card rounded-[32px] px-5 py-6 shadow-xl shadow-brand-500/10">
              <div class="flex items-center justify-between gap-3">
                <h2 class="text-lg font-semibold uppercase tracking-[0.3em] text-rose-500 dark:text-rose-300">Discard</h2>
                <span id="discard-count" class="rounded-full bg-rose-100/70 px-3 py-1 text-xs font-semibold text-rose-700 dark:bg-rose-500/20 dark:text-rose-200">${discard.length}</span>
              </div>
              <p class="mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300">Move traits here when they do not quite resonate. You can always bring them back.</p>
              <ul id="discard-list" class="custom-scrollbar mt-5 max-h-[420px] space-y-4 overflow-y-auto pr-1">
                <li id="discard-empty" class="${discard.length ? "hidden" : "flex"} items-center justify-center rounded-2xl border border-dashed border-rose-300/60 px-4 py-10 text-center text-sm text-rose-500/80 dark:border-rose-500/40 dark:text-rose-200/80">
                  Discarded traits will appear here when you tap “Discard”.
                </li>
                ${renderTraitList(discard, "discard")}
              </ul>
            </div>
            <div class="space-y-6">
              <div id="current-trait">
                ${renderCurrentTrait(currentTrait)}
              </div>
              <div class="glass-card rounded-[32px] px-6 py-6 text-sm leading-relaxed text-slate-600 shadow-xl shadow-brand-500/10 dark:text-slate-300">
                <h3 class="text-base font-semibold uppercase tracking-[0.3em] text-brand-500 dark:text-brand-200">How it works</h3>
                <p class="mt-3">Skim each trait and choose the ones that feel core to you. Aim to keep your strongest three for the AI prompt, but feel free to explore and refine as much as you like.</p>
                <ul class="mt-4 space-y-2 text-sm">
                  <li class="flex items-start gap-2"><span class="mt-1 h-1.5 w-1.5 rounded-full bg-brand-400"></span><span>Use <strong>Keep</strong> for traits that energise you.</span></li>
                  <li class="flex items-start gap-2"><span class="mt-1 h-1.5 w-1.5 rounded-full bg-rose-400"></span><span>Tap <strong>Discard</strong> to set traits aside (you can restore them anytime).</span></li>
                  <li class="flex items-start gap-2"><span class="mt-1 h-1.5 w-1.5 rounded-full bg-amber-400"></span><span>When you are happy with your top picks, copy the tailored prompt below.</span></li>
                </ul>
              </div>
            </div>
            <div class="glass-card rounded-[32px] px-5 py-6 shadow-xl shadow-brand-500/10">
              <div class="flex items-center justify-between gap-3">
                <h2 class="text-lg font-semibold uppercase tracking-[0.3em] text-emerald-500 dark:text-emerald-200">Keep</h2>
                <span id="keep-count" class="rounded-full bg-emerald-100/80 px-3 py-1 text-xs font-semibold text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200">${keep.length}</span>
              </div>
              <p class="mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300">These are your spotlight traits—keep an eye on your top three favourites for the prompt.</p>
              <ul id="keep-list" class="custom-scrollbar mt-5 max-h-[420px] space-y-4 overflow-y-auto pr-1">
                <li id="keep-empty" class="${keep.length ? "hidden" : "flex"} items-center justify-center rounded-2xl border border-dashed border-emerald-300/60 px-4 py-10 text-center text-sm text-emerald-600/80 dark:border-emerald-500/40 dark:text-emerald-200/80">
                  Your kept traits will glow here after you press “Keep”.
                </li>
                ${renderTraitList(keep, "keep")}
              </ul>
            </div>
          </section>
          <section class="glass-card rounded-[32px] px-6 py-8 shadow-xl shadow-brand-500/10 md:px-10 md:py-10">
            <div class="flex flex-col gap-6 md:flex-row md:items-start md:justify-between">
              <div class="max-w-2xl space-y-3">
                <h2 class="text-2xl font-bold tracking-tight text-slate-900 dark:text-white">Craft your AI-ready career prompt</h2>
                <p class="text-sm leading-relaxed text-slate-600 dark:text-slate-300">Gather up to three traits in the keep column and copy this prompt to ask your favourite AI for personalised career ideas.</p>
              </div>
              <button
                onclick="copyPrompt()"
                class="inline-flex items-center justify-center gap-2 rounded-2xl border border-transparent bg-gradient-to-r from-brand-500 via-fuchsia-500 to-amber-400 px-6 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-white shadow-lg shadow-brand-500/30 transition hover:-translate-y-0.5 hover:shadow-2xl focus:outline-none focus:ring-2 focus:ring-brand-300/60"
              >
                <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8 16h8m-8-4h8M9 8h6M5 6h14a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a1 1 0 0 1 1-1z" />
                </svg>
                Copy prompt
              </button>
            </div>
            <pre id="promptText" class="custom-scrollbar mt-6 max-h-[360px] overflow-y-auto rounded-2xl bg-slate-900/90 px-6 py-5 text-left text-sm leading-relaxed text-slate-100 shadow-inner dark:bg-slate-950/80">${PROMPT_TEXT}</pre>
            <p class="mt-6 text-sm text-slate-500 dark:text-slate-300">Need to sort skills too? <a href="skills.html" class="font-semibold text-brand-600 hover:text-brand-500 dark:text-brand-300 dark:hover:text-brand-200">Open the skill sorter&nbsp;&rarr;</a></p>
          </section>
        `;
        updateProgress();
        syncThemeToggleVisuals();
      }

      function renderCurrentTrait(currentTrait) {
        if (!currentTrait) {
          return `
            <div class="glass-card rounded-[32px] px-8 py-10 text-center text-slate-600 shadow-xl shadow-brand-500/10 dark:text-slate-300">
              <svg class="mx-auto h-10 w-10 text-brand-500 dark:text-brand-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
              </svg>
              <h3 class="mt-4 text-xl font-semibold text-slate-800 dark:text-white">All traits sorted!</h3>
              <p class="mt-2 text-sm">You can keep refining your list using the keep and discard columns.</p>
            </div>
          `;
        }
        return `
          <article class="relative overflow-hidden rounded-[32px] bg-gradient-to-br from-brand-500 via-fuchsia-500 to-indigo-600 p-[1px] shadow-[0_35px_70px_-30px_rgba(124,58,237,0.7)]">
            <div class="relative overflow-hidden rounded-[30px] bg-white/90 px-8 py-10 dark:bg-slate-950/80">
              <div class="pointer-events-none absolute inset-0 bg-gradient-to-br from-white/60 via-transparent to-transparent dark:from-white/10 dark:via-transparent"></div>
              <div class="relative z-10 space-y-6">
                <span class="inline-flex items-center gap-2 rounded-full bg-brand-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-brand-600 dark:bg-white/10 dark:text-brand-200">Now sorting</span>
                <h3 class="text-2xl font-bold text-slate-900 dark:text-white sm:text-3xl">${currentTrait.label}</h3>
                <p class="text-base leading-relaxed text-slate-600 dark:text-slate-300">${currentTrait.description}</p>
                <div class="flex flex-col gap-3 sm:flex-row sm:items-center">
                  <button
                    onclick="keepTrait()"
                    class="inline-flex w-full items-center justify-center gap-2 rounded-2xl bg-gradient-to-r from-emerald-400 via-emerald-500 to-teal-400 px-6 py-3.5 text-sm font-semibold uppercase tracking-[0.3em] text-white shadow-lg shadow-emerald-500/40 transition hover:-translate-y-0.5 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-emerald-300/70"
                  >
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
                    </svg>
                    Keep trait
                  </button>
                  <button
                    onclick="discardTrait()"
                    class="inline-flex w-full items-center justify-center gap-2 rounded-2xl border border-white/60 bg-white/80 px-6 py-3.5 text-sm font-semibold uppercase tracking-[0.3em] text-slate-700 shadow-lg shadow-brand-500/20 transition hover:-translate-y-0.5 hover:bg-white/90 dark:border-slate-700/60 dark:bg-slate-900/50 dark:text-slate-100 dark:hover:bg-slate-800/60 focus:outline-none focus:ring-2 focus:ring-slate-200/60"
                  >
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                    Save for later
                  </button>
                </div>
              </div>
            </div>
          </article>
        `;
      }

      function updateCurrentTrait() {
        const currentTraitDiv = document.getElementById("current-trait");
        if (!currentTraitDiv) return;
        const currentTrait = remaining[0];
        currentTraitDiv.innerHTML = renderCurrentTrait(currentTrait);
      }

      function toggleListPlaceholder(type) {
        const placeholder = document.getElementById(`${type}-empty`);
        if (!placeholder) return;
        const collection = type === "keep" ? keep : discard;
        if (collection.length === 0) {
          placeholder.classList.remove("hidden");
        } else {
          placeholder.classList.add("hidden");
        }
      }

      function updateProgress() {
        const sortedCount = keep.length + discard.length;
        const total = TRAITS.length;
        const progressPercent = total ? Math.round((sortedCount / total) * 100) : 0;
        const progressBar = document.getElementById("progress-indicator");
        const progressValue = document.getElementById("progress-value");
        const progressSummary = document.getElementById("progress-summary");
        const sortedCountEl = document.getElementById("sorted-count");
        const keepTotalEl = document.getElementById("keep-total");
        const discardTotalEl = document.getElementById("discard-total");
        const remainingTotalEl = document.getElementById("remaining-total");
        const keepCountBadge = document.getElementById("keep-count");
        const discardCountBadge = document.getElementById("discard-count");
        if (progressBar) progressBar.style.width = `${progressPercent}%`;
        if (progressValue) progressValue.textContent = `${progressPercent}%`;
        if (progressSummary) progressSummary.textContent = `${sortedCount} of ${total} traits sorted`;
        if (sortedCountEl) sortedCountEl.textContent = sortedCount;
        if (keepTotalEl) keepTotalEl.textContent = keep.length;
        if (discardTotalEl) discardTotalEl.textContent = discard.length;
        if (remainingTotalEl) remainingTotalEl.textContent = remaining.length;
        if (keepCountBadge) keepCountBadge.textContent = `${keep.length}`;
        if (discardCountBadge) discardCountBadge.textContent = `${discard.length}`;
      }

      function keepTrait() {
        if (!remaining[0]) return;
        const trait = remaining.shift();
        keep.push(trait.label);
        const keepList = document.getElementById("keep-list");
        if (keepList) {
          keepList.insertAdjacentHTML("beforeend", traitItemMarkup(trait, "keep"));
          const newItem = document.getElementById(getTraitItemId("keep", trait.label));
          if (newItem) {
            newItem.classList.add("adding");
            requestAnimationFrame(() => {
              newItem.classList.remove("adding");
              newItem.classList.add("added");
            });
          }
        }
        toggleListPlaceholder("keep");
        updateCurrentTrait();
        updateProgress();
      }

      function discardTrait() {
        if (!remaining[0]) return;
        const trait = remaining.shift();
        discard.push(trait.label);
        const discardList = document.getElementById("discard-list");
        if (discardList) {
          discardList.insertAdjacentHTML("beforeend", traitItemMarkup(trait, "discard"));
          const newItem = document.getElementById(getTraitItemId("discard", trait.label));
          if (newItem) {
            newItem.classList.add("adding");
            requestAnimationFrame(() => {
              newItem.classList.remove("adding");
              newItem.classList.add("added");
            });
          }
        }
        toggleListPlaceholder("discard");
        updateCurrentTrait();
        updateProgress();
      }

      function revertTraitSmooth(label, from) {
        const itemId = getTraitItemId(from, label);
        const item = document.getElementById(itemId);
        if (!item) return;
        item.classList.add("removing");
        setTimeout(() => {
          if (from === "keep") {
            keep = keep.filter((t) => t !== label);
          } else if (from === "discard") {
            discard = discard.filter((t) => t !== label);
          }
          const trait = TRAITS.find((t) => t.label === label);
          if (trait) {
            remaining.unshift(trait);
          }
          item.remove();
          toggleListPlaceholder(from);
          updateCurrentTrait();
          updateProgress();
        }, 420);
      }

      function resetAll() {
        keep = [];
        discard = [];
        remaining = [...TRAITS];
        render();
      }

      function copyPrompt() {
        if (keep.length > 3) {
          alert("Ensure only top 3 traits are listed.");
          return;
        }
        if (keep.length === 0) {
          const nonePrompt = `I am a high school student exploring career options. I have not chosen any personality traits yet.

Please suggest how I might begin identifying my personality traits and potential careers based on them.`;
          copyTextToClipboard(nonePrompt);
          return;
        }
        let intro = "I have not chosen any traits.";
        if (keep.length === 1) {
          intro = `My top personality trait is: ${keep[0]}.`;
        } else if (keep.length === 2) {
          intro = `My top 2 personality traits are: ${keep[0]}, ${keep[1]}.`;
        } else if (keep.length === 3) {
          intro = `My top 3 personality traits are: ${keep[0]}, ${keep[1]}, ${keep[2]}.`;
        }
        const finalPrompt = `I am a high school student exploring career options. ${intro}

Please suggest 8-10 careers that strongly align with these personality traits. For each career, include:

- A brief description (1-2 sentences).

- Why it fits my personality combination.

- Examples of industries or workplaces where this career exists.


Then, recommend 1-2 additional traits or skills I could develop to strengthen my fit for these careers.


Format your response in a clear list with headings.`;
        copyTextToClipboard(finalPrompt);
      }

      async function copyTextToClipboard(text) {
        if (navigator.clipboard && window.isSecureContext) {
          try {
            await navigator.clipboard.writeText(text);
            alert("Prompt copied to clipboard!");
          } catch (err) {
            console.error("Failed using navigator.clipboard:", err);
            fallbackCopy(text);
          }
        } else {
          fallbackCopy(text);
        }
      }

      function fallbackCopy(text) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed";
        textArea.style.top = "-9999px";
        textArea.style.left = "-9999px";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
          const successful = document.execCommand("copy");
          if (successful) {
            alert("Prompt copied to clipboard!");
          } else {
            alert("Failed to copy prompt via fallback.");
          }
        } catch (fallbackErr) {
          console.error("Fallback copy failed:", fallbackErr);
          alert("Failed to copy prompt.");
        } finally {
          document.body.removeChild(textArea);
        }
      }

      function applyTheme(theme, persist = false) {
        const nextTheme = theme === "dark" ? "dark" : "light";
        rootElement.setAttribute("data-theme", nextTheme);
        rootElement.classList.toggle("dark", nextTheme === "dark");
        if (persist) {
          localStorage.setItem(THEME_STORAGE_KEY, nextTheme);
        }
        syncThemeToggleVisuals();
      }

      function syncThemeToggleVisuals() {
        const toggleButton = document.getElementById("theme-toggle");
        const label = document.getElementById("theme-toggle-label");
        const sunIcon = document.getElementById("icon-sun");
        const moonIcon = document.getElementById("icon-moon");
        if (!toggleButton || !label || !sunIcon || !moonIcon) {
          return;
        }
        const isDark = rootElement.classList.contains("dark");
        toggleButton.setAttribute("aria-pressed", isDark ? "true" : "false");
        toggleButton.setAttribute("aria-label", isDark ? "Switch to light mode" : "Switch to dark mode");
        label.textContent = isDark ? "Light mode" : "Dark mode";
        sunIcon.classList.toggle("is-active", isDark);
        moonIcon.classList.toggle("is-active", !isDark);
      }

      function initializeThemeToggle() {
        const toggleButton = document.getElementById("theme-toggle");
        if (!toggleButton) return;
        toggleButton.onclick = () => {
          const isDark = rootElement.classList.contains("dark");
          applyTheme(isDark ? "light" : "dark", true);
        };
        syncThemeToggleVisuals();
      }

      document.addEventListener("click", (event) => {
        const button = event.target.closest("button[data-action=\"remove\"]");
        if (!button) return;
        const label = button.getAttribute("data-label");
        const origin = button.getAttribute("data-origin");
        if (!label || !origin) return;
        revertTraitSmooth(label, origin);
      });

      const prefersDarkQuery = window.matchMedia("(prefers-color-scheme: dark)");
      const storedTheme = localStorage.getItem(THEME_STORAGE_KEY);
      const initialTheme = storedTheme || (prefersDarkQuery.matches ? "dark" : "light");
      applyTheme(initialTheme, !!storedTheme);
      prefersDarkQuery.addEventListener("change", (event) => {
        if (!localStorage.getItem(THEME_STORAGE_KEY)) {
          applyTheme(event.matches ? "dark" : "light");
        }
      });
      window.addEventListener("storage", (event) => {
        if (event.key === THEME_STORAGE_KEY) {
          const newTheme = event.newValue;
          if (newTheme === "light" || newTheme === "dark") {
            applyTheme(newTheme);
          } else if (!newTheme) {
            applyTheme(prefersDarkQuery.matches ? "dark" : "light");
          }
        }
      });

      render();
      initializeThemeToggle();
      updateProgress();
    </script>
  </body>
</html>
